<?xml version="1.0"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN" "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>
    <form-beans>
        <form-bean name="selectFailureForm" type="net.paguo.web.struts.forms.SelectFailureForm"/>
        <form-bean name="crashForm" type="net.paguo.web.struts.forms.ProblemForm"/>
        <form-bean name="complaintForm" type="net.paguo.web.struts.forms.ClientComplaintForm"/>
        <form-bean name="causeForm" type="net.paguo.web.struts.resolutions.form.DiscoveredCauseForm"/>
        <form-bean name="restoreActionForm" type="net.paguo.web.struts.resolutions.form.RestoreActionForm"/>
    </form-beans>
    <global-exceptions>
        <exception key="errors.date" type="net.paguo.web.struts.exceptions.InvalidDateException" path=".default.error"/>
        <exception key="error.nothing.found" type="net.paguo.web.struts.exceptions.NothingFoundException" path=".default.error"/>
        <exception key="error.failure.no.cause.provided" type="net.paguo.web.struts.exceptions.FailureNoCauseProvidedException" path=".default.error"/>
        <exception key="error.failure.resolved" type="net.paguo.web.struts.exceptions.FailureClosedBeforeException" path=".default.error"/>
    </global-exceptions>
    <global-forwards>
    </global-forwards>
    <action-mappings>
        <action path="/listCrashes"
                type="net.paguo.web.struts.crashes.ListCrashesAction">
            <forward name="list" path=".crashes.list"/>
        </action>

        <action path="/listComplaints"
                type="net.paguo.web.struts.complaints.ListComplaintsAction">
            <forward name="list" path=".complaints.list"/>
        </action>

        <action path="/prepareCrashEdit" type="net.paguo.web.struts.crashes.PrepareEditCrashAction"
                name="crashForm"
                validate="false"
                input="/listCrashes.action">
            <forward name="next" path=".crash.edit"/>
        </action>

        <action path="/doCrashEdit" type="net.paguo.web.struts.crashes.EditCrashAction"
                input="/prepareCrashEdit.action"
                name="crashForm"
                unknown="false"
                validate="true">
              <forward name="success" path="/listCrashes.action"/>
              <forward name="error" path="/prepareCrashEdit.action"/>
        </action>

        <action path="/dropCrash" type="net.paguo.web.struts.DropFailureAction"
            input="/listCrashes.action"
            name="selectFailureForm"
            validate="true"
            parameter="crash">
            <forward name="success" path="/listCrashes.action"/>
        </action>

        <action path="/dropComplaint" type="net.paguo.web.struts.DropFailureAction"
            input="/listComplaints.action"
            name="selectFailureForm"
            validate="true"
            parameter="complaint">
            <forward name="success" path="/listComplaints.action"/>
        </action>

        <action path="/prepareComplaintEdit" type="net.paguo.web.struts.complaints.PrepareEditComplaintAction"
                name="complaintForm"
                validate="false"
                input="/listComplaints.action">
            <forward name="next" path=".complaints.edit"/>
        </action>

        <action path="/doComplaintEdit" type="net.paguo.web.struts.complaints.EditComplaintAction"
                input="/prepareComplaintEdit.action"
                name="complaintForm"
                unknown="false"
                validate="true">
            <forward name="success" path="/listComplaints.action"/>
            <forward name="error" path="/prepareComplaintEdit.action"/>
        </action>

        <action path="/showAddCrashCause" type="org.apache.struts.actions.ForwardAction"
            name="causeForm" parameter=".add.crash.cause" input=".crashes.list" validate="false"/>

        <action path="/showAddComplaintCause" type="org.apache.struts.actions.ForwardAction"
            name="causeForm" parameter=".add.complaint.cause" input=".crashes.list" validate="false"/>

        <action path="/addCrashCause" type="net.paguo.web.struts.resolutions.action.AddCauseAction"
                name="causeForm"
                validate="true"
                parameter="crash"
                input=".add.crash.cause">
            <forward name="next" path="/listCrashes.action"/>
            <forward name="xnext" path="/listComplaints.action"/>
            <forward name="error" path=".add.crash.cause"/>
        </action>

        <action path="/addComplaintCause" type="net.paguo.web.struts.resolutions.action.AddCauseAction"
                name="causeForm"
                validate="true"
                parameter="complaint"
                input=".add.complaint.cause">
            <forward name="next" path="/listCrashes.action"/>
            <forward name="xnext" path="/listComplaints.action"/>
            <forward name="error" path=".add.complaint.cause"/>
        </action>

        <action path="/showAddRestoreAction" type="org.apache.struts.actions.ForwardAction"
            name="restoreActionForm" parameter=".add.action" input=".crashes.list" validate="false"/>
        <action path="/doAddRestoreAction" name="restoreActionForm"
                validate="true"
                input=".add.action">
            <forward name="next" path="/listCrashes.action"/>
            <forward name="xnext" path="/listComplaints.action"/>
            <forward name="error" path=".add.cause"/>
        </action>
    </action-mappings>

    <controller>
        <set-property property="processorClass" value="org.springframework.web.struts.DelegatingTilesRequestProcessor"/>
    </controller>

    <message-resources parameter="messages"/>

    <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
        <set-property property="pathnames" value="/WEB-INF/validator-rules.xml,/WEB-INF/validation.xml"/>
    </plug-in>
    <plug-in className="org.apache.struts.tiles.TilesPlugin">
        <set-property property="definitions-config" value="/WEB-INF/tiles-defs.xml"/>
    </plug-in>
    <plug-in className="net.sf.navigator.menu.MenuPlugIn">
        <set-property property="menuConfig"
                      value="/WEB-INF/menu-config.xml"/>
    </plug-in>
</struts-config>
