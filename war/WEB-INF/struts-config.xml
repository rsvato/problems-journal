<?xml version="1.0"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN" "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>
    <form-beans>
        <form-bean name="selectFailureForm" type="org.apache.struts.validator.DynaValidatorForm">
            <form-property name="failureId" type="java.lang.Integer"/>
        </form-bean>
        <form-bean name="crashForm" type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
            <form-property name="failureId" type="java.lang.Integer"/>
            <form-property name="failureTime" type="java.lang.String"/>
            <form-property name="failureDescription" type="java.lang.String"/>
        </form-bean>
        <form-bean name="complaintForm" type="org.apache.struts.validator.DynaValidatorForm">
            <form-property name="failureId" type="java.lang.Integer"/>
            <form-property name="failureTime" type="java.lang.String"/>
            <form-property name="failureDescription" type="java.lang.String"/>
            <form-property name="failureClient" type="java.lang.Integer"/>
        </form-bean>
    </form-beans>

    <action-mappings>
        <action path="/listCrashes"
                type="net.paguo.web.struts.crashes.ListCrashesAction">
            <forward name="list" path=".crashes.list"/>
        </action>

        <action path="/listComplaints"
                type="net.paguo.web.struts.complaints.ListComplaintsAction">
            <forward name="list" path=".complaints.list"/>
        </action>

        <action path="/prepareCrashEdit" type="net.paguo.web.struts.crashes.PrepareEditCrashAction"
                name="crashForm"
                validate="false"
                input="/listCrashes.action">
            <forward name="next" path=".crash.edit"/>
        </action>

        <action path="/doCrashEdit" type="net.paguo.web.struts.crashes.EditCrashAction"
                input="/prepareCrashEdit.action"
                name="crashForm"
                unknown="false"
                validate="true">
              <forward name="success" path="/listCrashes.action"/>
              <forward name="error" path="/prepareCrashEdit.action"/>
        </action>

        <action path="/dropCrash" type="net.paguo.web.struts.DropFailureAction"
            input="/listCrashes.action"
            name="selectFailureForm"
            validate="true"
            parameter="crash">
            <forward name="success" path="/listCrashes.action"/>
        </action>

        <action path="/dropComplaint" type="net.paguo.web.struts.DropFailureAction"
            input="/listComplaints.action"
            name="selectFailureForm"
            validate="true"
            parameter="complaint">
            <forward name="success" path="/listComplaints.action"/>
        </action>

        <action path="/prepareComplaintEdit" type="net.paguo.web.struts.complaints.PrepareEditComplaintAction"
                name="complaintForm"
                validate="false"
                input="/listComplaints.action">
            <forward name="next" path=".complaints.edit"/>
        </action>

        <action path="/doComplaintEdit" type="net.paguo.web.struts.complaints.EditComplaintAction"
                input="/prepareComplaintEdit.action"
                name="complaintForm"
                unknown="false"
                validate="true">
            <forward name="success" path="/listComplaints.action"/>
            <forward name="error" path="/prepareComplaintEdit.action"/>
        </action>
    </action-mappings>

    <controller>
        <set-property property="processorClass" value="org.springframework.web.struts.DelegatingTilesRequestProcessor"/>
    </controller>

    <message-resources parameter="messages"/>

    <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
        <set-property property="pathnames" value="/WEB-INF/validator-rules.xml,/WEB-INF/validation.xml"/>
    </plug-in>
    <plug-in className="org.apache.struts.tiles.TilesPlugin">
        <set-property property="definitions-config" value="/WEB-INF/tiles-defs.xml"/>
    </plug-in>
</struts-config>
