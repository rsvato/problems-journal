<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE faces-config PUBLIC
  "-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.1//EN"
  "http://java.sun.com/dtd/web-facesconfig_1_1.dtd">

<faces-config>
    <application>
        <!--<view-handler>
            com.sun.facelets.FaceletViewHandler
        </view-handler>-->
        <default-render-kit-id>
            org.apache.myfaces.trinidad.core
        </default-render-kit-id>
        <variable-resolver>org.springframework.web.jsf.DelegatingVariableResolver</variable-resolver>
        <locale-config>
            <supported-locale>ru_RU</supported-locale>
            <supported-locale>en</supported-locale>
        </locale-config>
        <message-bundle>
           messages 
        </message-bundle>
    </application>

    <managed-bean>
        <managed-bean-name>
            crashList
        </managed-bean-name>
        <managed-bean-class>
            net.paguo.web.faces.beans.CrashListBean
        </managed-bean-class>
        <managed-bean-scope>
            session
        </managed-bean-scope>
        <managed-property>
            <property-name>failureController</property-name>
            <value>#{failureController}</value>
        </managed-property>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>
            editCrash
        </managed-bean-name>
        <managed-bean-class>net.paguo.web.faces.beans.EditProblemBean</managed-bean-class>
        <managed-bean-scope>
            session
        </managed-bean-scope>
        <managed-property>
            <property-name>controller</property-name>
            <value>#{failureController}</value>
        </managed-property>
    </managed-bean>

    <managed-bean>
        <managed-bean-name>authentication</managed-bean-name>
        <managed-bean-class>net.paguo.web.faces.beans.AuthenticationBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
        <managed-property>
            <property-name>manager</property-name>
            <value>#{authenticationManager}</value>
        </managed-property>
    </managed-bean>

    <managed-bean>
        <managed-bean-name>permissionList</managed-bean-name>
        <managed-bean-class>net.paguo.web.faces.beans.PermissionsListBean</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
        <managed-property>
            <property-name>controller</property-name>
            <value>#{usersController}</value>
        </managed-property>
    </managed-bean>

    <navigation-rule>
        <from-view-id>*</from-view-id>
        <navigation-case>
            <from-outcome>listcrashes</from-outcome>
            <to-view-id>/listCrashes.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>root</from-outcome>
            <to-view-id>/listCrashes.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>logout</from-outcome>
            <to-view-id>/login.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>

    <navigation-rule>
        <from-view-id>/listCrashes.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>editCrash</from-outcome>
            <to-view-id>/editProblem.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>

    <navigation-rule>
        <from-view-id>/login.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>failure</from-outcome>
            <to-view-id>/login.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/listCrashes.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>

</faces-config>
